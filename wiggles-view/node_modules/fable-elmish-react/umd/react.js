(function (global, factory) {
    if (typeof define === "function" && define.amd) {
        define(["exports", "react-dom", "./common", "fable-elmish/umd/elmish"], factory);
    } else if (typeof exports !== "undefined") {
        factory(exports, require("react-dom"), require("./common"), require("fable-elmish/umd/elmish"));
    } else {
        var mod = {
            exports: {}
        };
        factory(mod.exports, global.reactDom, global.common, global.elmish);
        global.react = mod.exports;
    }
})(this, function (exports, _reactDom, _common, _elmish) {
    "use strict";

    Object.defineProperty(exports, "__esModule", {
        value: true
    });
    exports.withReact = withReact;

    function withReact(placeholderId, program) {
        var lastRequest = null;

        var setState = function setState(model) {
            return function (dispatch) {
                if (lastRequest != null) {
                    var r = lastRequest;
                    window.cancelAnimationFrame(r);
                }

                lastRequest = window.requestAnimationFrame(function (_arg1) {
                    (0, _reactDom.render)(_common.Common.lazyView2With(function (x) {
                        return function (y) {
                            return x === y;
                        };
                    }, program.view, model, dispatch), document.getElementById(placeholderId));
                });
            };
        };

        return new _elmish.Program(program.init, program.update, program.subscribe, program.view, setState, program.onError);
    }
});
//# sourceMappingURL=react.js.map