{"version":3,"sources":["../react-native.fs"],"names":[],"mappings":";;;;;;;;;;;AAOO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAQE;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAc;AAAA;AAAA;AAAd;AAAA;AAAA;;AAGS,kCAEF;AAAA;AAAA;;AAAA,+BAAiB;AAAiC;AAAA;AAAA;AAAA;AAAiB,6BAAjB;AAAiB,yBAAjB;;AAAjC;AAAA;AAAA;AAAA;AAAoD,qBAApD,EAAjB;;AAAA;AAAA;AACuB,aAHrB,MAIC;AAAA;AAAiE;;AAP3E;AAAG;;AAAH;AAAA;AAAA,+BAUG;AAAA;;AAAA,2BAAiB;AAAA;;AAAiC;AAAA;AAAa,qBAAb;;AAAjC;AAAA;AAAA;AAAA;AAAgD,iBAAhD,EAAjB;AAAiE;AAVpE;AAAA;AAAA,+BAaG;AAAA;;AAAA,2BAAiB;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAkD,mDAAlD;AAAA;AAAA;AAAqE,iBAArE,EAAjB;AAAsF;AAbzF;AAAA;AAAA,+BAgBG;AAAA;AAAmB;AAhBtB;;AAAA;AAAA;;AARF;AAAA;AAuBmB,CAvBnB;AA+BA;AAMC,sDACA;AAAA;AAAA;AAAA;;AAEW;AAAA;AAAA,iDAEH;AAAA;AAAA,mCAAe;AAAgC;AAAA;AAAA,yBAAhC;AAAA;AAAA,qBAAf;AAAiE,iBAF9D,MAIH;AAAA,0CAAiB;AAAqB;AAAA;AAAA,yBAArB;AAAA;AAAA;AAAA;AAAA,qBAAjB;AACsC;AAL3B,aAAR;AAAA;;AAMX;AAAkC,KATlC;;AAND;AAMgB,CANhB","file":"react-native.js","sourcesContent":["namespace Elmish.ReactNative\n\nopen System\nopen Fable.Import.React\nopen Fable.Core\nopen Elmish\n\nmodule Components =\n    type [<Pojo>] AppState = { \n        render : unit -> ReactElement\n        setState : AppState -> unit\n    }\n\n    let mutable appState = None\n\n    type App(props) as this =\n        inherit Component<obj,AppState>(props)\n        do\n            match appState with\n            | Some state ->\n                appState <- Some { state with AppState.setState = this.setInitState }\n                this.setInitState state\n            | _ -> failwith \"was Elmish.ReactNative.Program.withReactNative called?\"\n\n        member this.componentDidMount() =\n            appState <- Some { appState.Value with setState = this.setState }\n\n        member this.componentWillUnmount() =\n            appState <- Some { appState.Value with setState = ignore; render = this.state.render }\n\n        member this.render () = \n            this.state.render()\n\n[<Import(\"AppRegistry\",\"react-native\")>] \ntype AppRegistry =\n    static member registerComponent(appKey:string, getComponentFunc:unit->ComponentClass<_>) : unit = failwith \"JS only\"\n\n[<RequireQualifiedAccess>]\nmodule Program =\n    open Fable.Core.JsInterop\n    open Elmish.React\n    open Components\n\n    /// Setup rendering of root ReactNative component\n    let withReactNative appKey (program:Program<_,_,_,_>) =\n        AppRegistry.registerComponent(appKey, fun () -> unbox typeof<App>)\n        let render m d =\n             match appState with\n             | Some state -> \n                state.setState { state with render = fun () -> program.view m d }\n             | _ -> \n                appState <- Some { render = fun () -> program.view m d \n                                   setState = ignore }\n        { program with setState = render }\n"]}